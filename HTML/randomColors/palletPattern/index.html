<!DOCTYPE HTML>

<html>
    <head>
        <meta charset="UTF-8">
        <title id="title">Pallete Pattern</title>
        <link rel="stylesheet" href="../index.css" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Atkinson+Hyperlegible" />
        <link rel="shortcut icon" type="image/png" href="../colorRand_Square.png" />
        <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
        <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
        <style>
            html,body { height:100%; }
        </style>
    </head>
    <body style="background-color: white; margin:0px; height:100%;" id="main" class="transition" onload="load()">
        <div id="root"></div> 
        <div style="display:flex" class="row" id="landscapeView" >
            <div class="column" id="colorTransition0" align="left" style="background-color: black;">
                <p class="pallet" id="pallet0" position="relative" top="50px">Test</p>
            </div>
            <div style="background-color: black;"  class="column" id="colorTransition1" align="left">
                <p class="pallet" id="pallet1">Test</p>
            </div>
            <div style="background-color: black;"  class="column" id="colorTransition2" align="left">
                <p class="pallet" id="pallet2">Test</p>
            </div>
            <div style="background-color: black;"  class="column" id="colorTransition3" align="left">
                <p class="pallet" id="pallet3">Test</p>
            </div>
            <div style="background-color: black;"  class="column" id="colorTransition4" align="left">
                <p class="pallet" id="pallet4">Test</p>
            </div>
        </div>

        <div style="display:none" class="row" id="portraitView" >
            Does this work
        </div>

        <div style="position:fixed; top: 18px; left: 50%">
            <a href="https://twitter.com/colorRand" title="color.Rand() on Twitter" target="_blank"> <img src="../colorRand.png"
                    id="logo" height="80vh" alt="colorRand Logo" /> </a>
        </div>
        <div style="position:fixed; top: 50%; left: 10px">
            <a href="https://twitter.com/colorRand" title="color.Rand() on Twitter" target="_blank"> <img src="../colorRand.png"
                    id="logo" height="80vh" alt="colorRand Logo" /> </a>
        </div>
        
        <script type="text/babel">
            var color0 = '#000000'
            var color0Div = {backgroundColor: color10};
            var color1= '#000000'
            var color1Div = {backgroundColor: color1};
            var color2 = '#000000'
            var color2Div = {backgroundColor: color2};
            var color3 = '#000000'
            var color3Div = {backgroundColor: color3};
            var color4 = '#000000'
            var color4Div = {backgroundColor: color4};

            function getParameterByName(name, url = window.location.href) {
                name = name.replace(/[\[\]]/g, '\\$&');
                var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                    results = regex.exec(url);
                if (!results) return null;
                if (!results[2]) return '';
                return decodeURIComponent(results[2].replace(/\+/g, ' '));
            }

            function shadeColor(color, percent) {
                if (color.indexOf('#') != 0) {
                    color = "#" + color;
                }

                var R = parseInt(color.substring(1, 3), 16);
                var G = parseInt(color.substring(3, 5), 16);
                var B = parseInt(color.substring(5, 7), 16);

                R = parseInt(R * (100 + percent) / 100);
                G = parseInt(G * (100 + percent) / 100);
                B = parseInt(B * (100 + percent) / 100);

                R = (R < 255) ? R : 255;
                G = (G < 255) ? G : 255;
                B = (B < 255) ? B : 255;

                var RR = ((R.toString(16).length == 1) ? "0" + R.toString(16) : R.toString(16));
                var GG = ((G.toString(16).length == 1) ? "0" + G.toString(16) : G.toString(16));
                var BB = ((B.toString(16).length == 1) ? "0" + B.toString(16) : B.toString(16));

                return "#" + RR + GG + BB;
            }

            function invertColor(hex) {
                if (hex.indexOf('#') === 0) {
                    hex = hex.slice(1);
                }
                // convert 3-digit hex to 6-digits.
                if (hex.length === 3) {
                    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
                }
                if (hex.length !== 6) {
                    throw new Error('Invalid HEX color.');
                }
                // invert color components
                var r = (255 - parseInt(hex.slice(0, 2), 16)).toString(16),
                    g = (255 - parseInt(hex.slice(2, 4), 16)).toString(16),
                    b = (255 - parseInt(hex.slice(4, 6), 16)).toString(16);
                // pad each with zeros and return
                return '#' + padZero(r) + padZero(g) + padZero(b);
            }

            function padZero(str, len) {
                len = len || 2;
                var zeros = new Array(len).join('0');
                return (zeros + str).slice(-len);
            }

            function load(){
                color0 = '#' + getParameterByName('color');
                color0Div = {backgroundColor: color0};
                color1 = shadeColor(color0, 30);
                color1Div = {backgroundColor: color1};
                color2 = shadeColor(color0, -30);
                color2Div = {backgroundColor: color2};
                color3 = invertColor(color0);
                color3Div = {backgroundColor: color3};
                color4 = shadeColor(color3, 40);
                color4Div = {backgroundColor: color4};
                console.log(color0);
                console.log(color1);
                console.log(color2);
                console.log(color3);
                console.log(color4);
                document.getElementById('main').style.backgroundColor = color0;
                if (screen.availHeight > screen.availWidth) {
                    document.getElementById('portraitView').style.display = "block";
                } else {
                    document.getElementById('landscapeView').style.display = "flex";
                    ReactDOM.render(<p className="pallet">{color0}</p>, document.getElementById("colorTransition0"));
                    ReactDOM.render(<p className="pallet">{color1}</p>, document.getElementById("colorTransition1"));
                    ReactDOM.render(<p className="pallet">{color2}</p>, document.getElementById("colorTransition2"));
                    ReactDOM.render(<p className="pallet">{color3}</p>, document.getElementById("colorTransition3"));
                    ReactDOM.render(<p className="pallet">{color4}</p>, document.getElementById("colorTransition4"));
                }
                document.getElementById('colorTransition0').style.backgroundColor = color0;
                document.getElementById('colorTransition1').style.backgroundColor = color1;
                document.getElementById('colorTransition2').style.backgroundColor = color2;
                document.getElementById('colorTransition3').style.backgroundColor = color3;
                document.getElementById('colorTransition4').style.backgroundColor = color4;
            }

        </script>
    </body>
</html>