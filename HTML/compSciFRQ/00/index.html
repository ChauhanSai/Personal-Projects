<!DOCTYPE HTML>

<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>APCS 2000 FRQ</title>
		<link rel="stylesheet" type="text/css" href="../main.css" />
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Atkinson+Hyperlegible"/>
		<link rel="shortcut icon" type="image/png" href="../favicon.png"/>
	</head>
	<body align="center" onload="load()">
		<div class="headRow" style="height: 5%;">
			<div class="column" align="left">
				<header><a href="https://chauhansai.github.io/Script-Projects/HTML/compSciFRQ/" id="header">FRQ Practice</a></header>2000
			</div>
			<div class="column" align="left">
				<p id="time" align="right"></p>
			</div>
		</div>
		
		<div class="row">
			<div class="column" align="left">
				<object data="test.pdf" type="application/pdf" style="width:45%; height:800px; position:fixed; top=0; left=0;" id="pdf" >Loading PDF...</object>
			</div>
			<div class="column" align="left">
				<div id="f1" class="frq">
					<h3>FRQ 1:</h3>
					Part A: 
					<textarea class="textarea"></textarea>
					Part B: 
					<textarea class="textarea"></textarea>
					Part C: 
					<textarea class="textarea"></textarea>
				</div>

				<div id="f2" class="frq">
					<h3>FRQ 2:</h3>
					Part A: 
					<textarea class="textarea"></textarea>
					Part B: 
					<textarea class="textarea"></textarea>
				</div>

				<div id="f3" class="frq">
					<h3>FRQ 3:</h3>
					Part A: 
					<textarea class="textarea"></textarea>
					Part B: 
					<textarea class="textarea"></textarea>
					Part C: 
					<textarea class="textarea"></textarea>
				</div>

				<div id="f4" class="frq">
					<h3>FRQ 4:</h3>
					Part A: 
					<textarea class="textarea"></textarea>
					Part B: 
					<textarea class="textarea"></textarea>
					Part C: 
					<textarea class="textarea"></textarea>
				</div>

				<br/><br/>
				<footer align="right">
					<a onclick="next()" id="skip">Skip</a>
					<button style="margin:16px 10px;" onclick="submit()" id="submitButton">Submit</button>
				</footer>
			</div>
		</div>
		
		<script>
			var countTo = new Date(new Date().getTime() + 105.017*60000);

			var x = setInterval(function() {

			  var now = new Date().getTime();
				
			  var distance = countTo - now;
				
			  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
			  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
			  var seconds = Math.floor((distance % (1000 * 60)) / 1000);
				
			  document.getElementById("time").innerHTML = hours + ":"
			  + minutes + ":" + seconds + "";
				
			  if (distance < 0) {
				document.getElementById("time").innerHTML = "Auto-Submitted";
				submit();
			  }
			}, 1000);
			
			function getParameterByName(name, url = window.location.href) {
				name = name.replace(/[\[\]]/g, '\\$&');
				var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
					results = regex.exec(url);
				if (!results) return null;
				if (!results[2]) return '';
				return decodeURIComponent(results[2].replace(/\+/g, ' '));
			}
			
			function load(){
				resize();
				var hide = ['f1','f2','f3','f4'];
				var frq = getParameterByName('frq');
				if(frq!=null){
					console.log('true');
					hide[parseInt(frq)-1] = ' ';
					for (let j = 0; j < hide.length; j++) {
						if(hide[j]!=' '){
							console.log('true');
							document.getElementById(hide[j]).style.display = "none";
						}
					}
					document.getElementById("pdf").data = 'frq'+frq+'.pdf';
					countTo = new Date(new Date().getTime() + 25.017*60000);
				}
				
			}
			
			function resize() {				
				var all = document.getElementsByClassName("textarea");
				for (var i = 0; i < all.length; i++) {
				  all[i].style.height = "200px";
				}
			}
			
			function submit(){
				if(document.getElementById("submitButton").innerHTML == "Next FRQ"){
					next();
				} else {
					var all = document.getElementsByClassName("textarea");
					for (var i = 0; i < all.length; i++) {
					  all[i].readOnly = true;
					  all[i].style.backgroundColor = '#1a1a1a';
					  all[i].style.cursor = 'default';
					}
					document.getElementById("submitButton").style.backgroundColor = '#404040';
					document.getElementById("submitButton").style.color = '#ffffff';
					document.getElementById("submitButton").style.color = '#ffffff';
					document.getElementById("submitButton").innerHTML = "Next FRQ";
					document.getElementById("skip").innerHTML = "";
					document.getElementById("pdf").data = 'score.pdf';
					document.getElementById("header").innerHTML = 'FRQ Self Score';
					clearInterval(x);
				}
			}
			
			function next(){
				var frq = getParameterByName('frq');
				if(frq!=null){
					location.href='https://chauhansai.github.io/Script-Projects/HTML/compSciFRQ/?next=true&frq=true';
				} else {
					location.href='https://chauhansai.github.io/Script-Projects/HTML/compSciFRQ/?next=true';
				}
			}
		</script>
		
	</body>
</html>

